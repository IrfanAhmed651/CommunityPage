{"ast":null,"code":"var _jsxFileName = \"D:\\\\CSE470\\\\CP\\\\client\\\\src\\\\PostFormModal.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport ClickOutHandler from 'react-clickout-handler';\nimport { useState, useContext } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Input from \"./Input\";\nimport Textarea from \"./Textarea\";\nimport Button from \"./Button\";\nimport PostFormModalContext from \"./PostFormModalContext\";\nimport AuthModalContext from \"./AuthModalContext\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction PostFormModal() {\n  _s();\n\n  const modalContext = useContext(PostFormModalContext);\n  const authModalContext = useContext(AuthModalContext);\n  const visibleClass = modalContext.show ? 'block' : 'hidden';\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [newPostId, setNewPostId] = useState(null);\n\n  function createPost() {\n    const data = {\n      title,\n      body\n    };\n    axios.post('http://localhost:4000/comments', data, {\n      withCredentials: true\n    }).then(response => {\n      setNewPostId(response.data._id);\n    }).catch(error => {\n      console.log(error);\n\n      if (error.response.status === 401) {\n        authModalContext.setShow('login');\n      }\n    });\n  }\n\n  if (newPostId) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: '/comments/' + newPostId\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 17\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-screen h-screen fixed top-0 left-0 z-20 flex \" + visibleClass,\n    style: {\n      backgroundColor: 'rgba(0,0,0,.8)'\n    },\n    children: /*#__PURE__*/_jsxDEV(ClickOutHandler, {\n      onClickOut: () => {},\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"border border-rd-brighter w-3/4 md:w-2/4 bg-rd p-5 text-rt self-center mx-auto rounded-md\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-2xl mb-5\",\n          children: \"Create a post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Input, {\n          className: 'w-full mb-3',\n          placeholder: 'Title',\n          onChange: e => setTitle(e.target.value),\n          value: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Textarea, {\n          className: 'w-full mb-3',\n          placeholder: 'Post text (you can use markdown)',\n          onChange: e => setBody(e.target.value),\n          value: body\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: 'text-right',\n          children: [/*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => modalContext.setShow(false),\n            outline: true,\n            className: 'px-4 py-2 mr-3',\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Button, {\n            onClick: () => createPost(),\n            className: 'px-4 py-2 mr-3',\n            children: \"POST\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 42,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PostFormModal, \"q0VYUge9481X5NOf9sSavehUnoc=\");\n\n_c = PostFormModal;\nexport default PostFormModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"PostFormModal\");","map":{"version":3,"names":["React","ClickOutHandler","useState","useContext","Redirect","Input","Textarea","Button","PostFormModalContext","AuthModalContext","axios","PostFormModal","modalContext","authModalContext","visibleClass","show","title","setTitle","body","setBody","newPostId","setNewPostId","createPost","data","post","withCredentials","then","response","_id","catch","error","console","log","status","setShow","backgroundColor","e","target","value"],"sources":["D:/CSE470/CP/client/src/PostFormModal.js"],"sourcesContent":["import React from 'react';\r\nimport ClickOutHandler from 'react-clickout-handler';\r\nimport { useState, useContext } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport Input from \"./Input\";\r\nimport Textarea from \"./Textarea\";\r\nimport Button from \"./Button\";\r\nimport PostFormModalContext from \"./PostFormModalContext\";\r\nimport AuthModalContext from \"./AuthModalContext\";\r\nimport axios from \"axios\";\r\n\r\nfunction PostFormModal() {\r\n\r\n    const modalContext = useContext(PostFormModalContext);\r\n    const authModalContext = useContext(AuthModalContext);\r\n\r\n    const visibleClass = modalContext.show ? 'block' : 'hidden';\r\n\r\n    const [title, setTitle] = useState('');\r\n    const [body, setBody] = useState('');\r\n    const [newPostId, setNewPostId] = useState(null);\r\n\r\n    function createPost() {\r\n        const data = { title, body };\r\n        axios.post('http://localhost:4000/comments', data, { withCredentials: true })\r\n            .then(response => {\r\n                setNewPostId(response.data._id);\r\n            })\r\n            .catch(error => {\r\n                console.log(error);\r\n                if (error.response.status === 401) {\r\n                    authModalContext.setShow('login');\r\n                }\r\n            });\r\n    }\r\n\r\n    if (newPostId) {\r\n        return (<Redirect to={'/comments/' + newPostId} />);\r\n    }\r\n\r\n    return (\r\n        <div\r\n            className={\"w-screen h-screen fixed top-0 left-0 z-20 flex \" + visibleClass} style={{ backgroundColor: 'rgba(0,0,0,.8)' }}>\r\n            <ClickOutHandler onClickOut={() => { }}>\r\n                <div className=\"border border-rd-brighter w-3/4 md:w-2/4 bg-rd p-5 text-rt self-center mx-auto rounded-md\">\r\n                    <h1 className=\"text-2xl mb-5\">Create a post</h1>\r\n                    <Input\r\n                        className={'w-full mb-3'}\r\n                        placeholder={'Title'}\r\n                        onChange={e => setTitle(e.target.value)}\r\n                        value={title} />\r\n                    <Textarea\r\n                        className={'w-full mb-3'}\r\n                        placeholder={'Post text (you can use markdown)'}\r\n                        onChange={e => setBody(e.target.value)}\r\n                        value={body} />\r\n                    <div className={'text-right'}>\r\n                        <Button onClick={() => modalContext.setShow(false)}\r\n                            outline className={'px-4 py-2 mr-3'}>Cancel</Button>\r\n                        <Button onClick={() => createPost()} className={'px-4 py-2 mr-3'}>POST</Button>\r\n                    </div>\r\n                </div>\r\n            </ClickOutHandler>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default PostFormModal;"],"mappings":"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"},"metadata":{},"sourceType":"module"}