{"ast":null,"code":"var _jsxFileName = \"D:\\\\CSE470\\\\CP\\\\client\\\\src\\\\Comment.js\",\n    _s = $RefreshSig$();\n\nimport Showposts from \"./Showposts\";\nimport CommentForm from \"./CommentForm\";\nimport RootCommentContext from \"./RootCommentContext\";\nimport Comments from \"./Comments\";\nimport { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction Comment(props) {\n  _s();\n\n  const [comment, setComment] = useState({});\n  const [comments, setComments] = useState([]);\n  const [commentsTotals, setCommentsTotals] = useState(null);\n  const [userVotes, setUserVotes] = useState(null);\n\n  function refreshComments() {\n    axios.get('http://localhost:4000/comments/root/' + props.id).then(response => {\n      setComments(response.data);\n    });\n  }\n\n  function refreshVotes() {\n    const commentsIds = [comment._id, ...comments.map(c => c._id)];\n    axios.post('http://localhost:4000/votes', {\n      commentsIds\n    }, {\n      withCredentials: true\n    }).then(response => {\n      setCommentsTotals(response.data.commentsTotals);\n      setUserVotes(response.data.userVotes);\n    });\n  }\n\n  useEffect(() => {\n    if (props.comment) {\n      setComment(props.comment);\n    } else {\n      axios.get('http://localhost:4000/comments/' + props.id).then(response => {\n        setComment(response.data);\n      });\n    }\n\n    refreshComments();\n  }, [props.id, props.comment]);\n  useEffect(() => {\n    refreshVotes();\n  }, [comments.length]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [comment && /*#__PURE__*/_jsxDEV(Showposts, { ...comment,\n      open: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 17\n    }, this), !!comment && !!comment._id && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"border-rb my-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(CommentForm, {\n        onSubmit: () => refreshComments(),\n        rootId: comment._id,\n        parentId: comment._id,\n        showAuthor: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"border-rb my-4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(RootCommentContext.Provider, {\n        value: {\n          refreshComments,\n          refreshVotes,\n          commentsTotals,\n          userVotes\n        },\n        children: /*#__PURE__*/_jsxDEV(Comments, {\n          parentId: comment._id,\n          rootId: comment._id,\n          comments: comments\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 59,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n}\n\n_s(Comment, \"ZQVTmSSv3aaMXjVmWAbQHeXLMrs=\");\n\n_c = Comment;\nexport default Comment;\n\nvar _c;\n\n$RefreshReg$(_c, \"Comment\");","map":{"version":3,"names":["Showposts","CommentForm","RootCommentContext","Comments","useEffect","useState","axios","Comment","props","comment","setComment","comments","setComments","commentsTotals","setCommentsTotals","userVotes","setUserVotes","refreshComments","get","id","then","response","data","refreshVotes","commentsIds","_id","map","c","post","withCredentials","length"],"sources":["D:/CSE470/CP/client/src/Comment.js"],"sourcesContent":["import Showposts from \"./Showposts\";\r\nimport CommentForm from \"./CommentForm\";\r\nimport RootCommentContext from \"./RootCommentContext\";\r\nimport Comments from \"./Comments\";\r\nimport { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nfunction Comment(props) {\r\n\r\n    const [comment, setComment] = useState({});\r\n    const [comments, setComments] = useState([]);\r\n    const [commentsTotals, setCommentsTotals] = useState(null);\r\n    const [userVotes, setUserVotes] = useState(null);\r\n\r\n    function refreshComments() {\r\n        axios.get('http://localhost:4000/comments/root/' + props.id)\r\n            .then(response => {\r\n                setComments(response.data);\r\n            });\r\n    }\r\n\r\n    function refreshVotes() {\r\n        const commentsIds = [comment._id, ...comments.map(c => c._id)];\r\n        axios.post('http://localhost:4000/votes', { commentsIds }, { withCredentials: true })\r\n            .then(response => {\r\n                setCommentsTotals(response.data.commentsTotals);\r\n                setUserVotes(response.data.userVotes);\r\n            })\r\n    }\r\n\r\n    useEffect(() => {\r\n        if (props.comment) {\r\n            setComment(props.comment);\r\n        } else {\r\n            axios.get('http://localhost:4000/comments/' + props.id)\r\n                .then(response => {\r\n                    setComment(response.data);\r\n                });\r\n        }\r\n        refreshComments();\r\n    }, [props.id, props.comment]);\r\n\r\n    useEffect(() => {\r\n        refreshVotes();\r\n    }, [comments.length]);\r\n\r\n    return (\r\n        <>\r\n            {comment && (\r\n                <Showposts {...comment} open={true} />\r\n            )}\r\n            {!!comment && !!comment._id && (\r\n                <>\r\n                    <hr className=\"border-rb my-4\" />\r\n                    <CommentForm onSubmit={() => refreshComments()}\r\n                        rootId={comment._id} parentId={comment._id} showAuthor={true} />\r\n                    <hr className=\"border-rb my-4\" />\r\n                    <RootCommentContext.Provider value={{ refreshComments, refreshVotes, commentsTotals, userVotes }}>\r\n                        <Comments\r\n                            parentId={comment._id}\r\n                            rootId={comment._id}\r\n                            comments={comments} />\r\n                    </RootCommentContext.Provider>\r\n                </>\r\n            )}\r\n        </>\r\n    );\r\n}\r\n\r\nexport default Comment;"],"mappings":"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"},"metadata":{},"sourceType":"module"}